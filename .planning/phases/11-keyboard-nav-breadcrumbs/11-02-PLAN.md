---
phase: 11-keyboard-nav-breadcrumbs
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: [dashboard/src/components/Breadcrumbs.tsx, dashboard/src/pages/ProjectsPage.tsx]
autonomous: true

must_haves:
  truths:
    - "Projects page shows breadcrumb trail reflecting current step"
    - "Breadcrumb items are clickable to navigate back to prior steps"
    - "Breadcrumb trail updates as user progresses through discover → select → compare"
  artifacts:
    - path: "dashboard/src/components/Breadcrumbs.tsx"
      provides: "Reusable breadcrumb trail component"
      min_lines: 15
    - path: "dashboard/src/pages/ProjectsPage.tsx"
      provides: "Projects page with breadcrumb integration"
      contains: "Breadcrumbs"
  key_links:
    - from: "dashboard/src/pages/ProjectsPage.tsx"
      to: "dashboard/src/components/Breadcrumbs.tsx"
      via: "component import and render"
      pattern: "Breadcrumbs"
    - from: "dashboard/src/pages/ProjectsPage.tsx"
      to: "step state"
      via: "useState tracking current step"
      pattern: "step|currentStep"
---

<objective>
Add breadcrumb navigation to the Projects page showing the user's position in the discover → select → compare flow with clickable back-navigation.

Purpose: Improve Projects page UX with clear wayfinding (NAV-04, NAV-05).
Output: Reusable Breadcrumbs component and updated ProjectsPage with step tracking.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@dashboard/src/pages/ProjectsPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Breadcrumbs component</name>
  <files>dashboard/src/components/Breadcrumbs.tsx</files>
  <action>
    Create `dashboard/src/components/Breadcrumbs.tsx`:

    **Props:**
    ```typescript
    interface BreadcrumbItem {
      label: string;
      onClick?: () => void;  // undefined = current step (not clickable)
    }

    interface BreadcrumbsProps {
      items: BreadcrumbItem[];
    }
    ```

    **Rendering:**
    - Horizontal flex row of items separated by chevron-right (>) icons.
    - Clickable items (have `onClick`): rendered as buttons with `text-blue-600 hover:text-blue-800 hover:underline cursor-pointer` styling. These are prior steps the user can navigate back to.
    - Current item (no `onClick`): rendered as plain text with `text-slate-800 font-medium` styling. This is the active step.
    - Chevron separator: small right-pointing arrow icon (`>` character or SVG) in `text-slate-400`.
    - Text size: `text-sm`.
    - The component is generic and reusable — it doesn't know about Projects specifically.

    **Example output for "Select" step:**
    `Discover  >  Select  >  Compare`
    where "Discover" is a clickable blue link, "Select" is bold current text, and "Compare" is greyed out or not shown.

    **Design decision:** Only show breadcrumb items up to and including the current step. Future steps are not shown (cleaner than showing greyed-out future steps).
  </action>
  <verify>npm run build succeeds (TypeScript compiles without errors)</verify>
  <done>Breadcrumbs component renders clickable prior steps and non-clickable current step with chevron separators.</done>
</task>

<task type="auto">
  <name>Task 2: Integrate breadcrumbs into ProjectsPage with step tracking</name>
  <files>dashboard/src/pages/ProjectsPage.tsx</files>
  <action>
    Refactor ProjectsPage to track its current step explicitly and render breadcrumbs.

    **Step tracking:**
    The page already has implicit steps based on state:
    - **Discover**: Initial state — user enters directory and clicks Discover (no `workspace` data yet)
    - **Select**: After discovery — user sees project cards and selects 2+ (has `workspace` but no `comparison`)
    - **Compare**: After comparison — user sees comparison table (has `comparison`)

    Add a derived step variable:
    ```typescript
    type ProjectStep = "discover" | "select" | "compare";
    const step: ProjectStep = comparison ? "compare" : workspace ? "select" : "discover";
    ```

    **Breadcrumbs wiring:**
    Import `Breadcrumbs` from `../components/Breadcrumbs`.

    Build breadcrumb items based on current step:
    - **discover step:** `[{ label: "Discover" }]` — just current step, no prior items.
    - **select step:** `[{ label: "Discover", onClick: () => { setWorkspace(null); setSelectedPaths(new Set()); setComparison(null); } }, { label: "Select" }]`
    - **compare step:** `[{ label: "Discover", onClick: () => { setWorkspace(null); setSelectedPaths(new Set()); setComparison(null); } }, { label: "Select", onClick: () => setComparison(null) }, { label: "Compare" }]`

    Render `<Breadcrumbs items={breadcrumbItems} />` right below the page title/description, above the content. Add a small bottom margin (`mb-4`).

    **Remove the existing "Back to Discovery" button** in ComparisonTable — breadcrumbs now handle this navigation. The `onBack` prop of ComparisonTable is no longer needed. Simplify ComparisonTable by removing the back button and `onBack` prop. The breadcrumbs above provide the navigation.

    **Keep the existing page title and description** ("Projects" / "Discover and compare...") — breadcrumbs sit between the description and the content area.
  </action>
  <verify>npm run build succeeds. Breadcrumbs visible at each step. Clicking breadcrumb items navigates back correctly.</verify>
  <done>Projects page shows breadcrumb trail at each step. Clicking "Discover" from compare resets to initial state. Clicking "Select" from compare returns to project cards. Old "Back to Discovery" button removed.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm test` passes (no regressions)
- [ ] Breadcrumbs.tsx exists and is generic/reusable
- [ ] ProjectsPage imports and renders Breadcrumbs
- [ ] Discover step: single breadcrumb "Discover"
- [ ] Select step: "Discover > Select" with Discover clickable
- [ ] Compare step: "Discover > Select > Compare" with first two clickable
- [ ] Old "Back to Discovery" button removed from ComparisonTable
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Breadcrumb trail visible at all three ProjectsPage steps
- Clicking breadcrumb items navigates back to correct step
- ComparisonTable no longer has redundant back button
  </success_criteria>

<output>
After completion, create `.planning/phases/11-keyboard-nav-breadcrumbs/11-02-SUMMARY.md`
</output>
