---
phase: 04-web-dashboard
plan: 04
type: execute
wave: 4
depends_on: ["04-03"]
files_modified:
  - dashboard/src/pages/HooksPage.tsx
  - dashboard/src/pages/PermissionsPage.tsx
  - dashboard/src/App.tsx
  - dashboard/src/components/Layout.tsx
  - dashboard/src/components/Sidebar.tsx
  - dashboard/src/index.css
autonomous: false

must_haves:
  truths:
    - "User can see all hook events with configured/unconfigured status"
    - "User can expand a hook event to see matchers and commands"
    - "User can see all permissions with effective rule, tool, and scope"
    - "User can expand a permission to see its override chain"
    - "Dashboard is responsive on tablet-width screens"
    - "All dashboard pages load without errors"
  artifacts:
    - path: "dashboard/src/pages/HooksPage.tsx"
      provides: "Hooks event catalog with configured hook details"
      min_lines: 50
    - path: "dashboard/src/pages/PermissionsPage.tsx"
      provides: "Permissions viewer with rule merging and override chains"
      min_lines: 50
  key_links:
    - from: "dashboard/src/pages/HooksPage.tsx"
      to: "/api/hooks"
      via: "fetch hooks data"
      pattern: "fetch.*api/hooks"
    - from: "dashboard/src/pages/PermissionsPage.tsx"
      to: "/api/permissions"
      via: "fetch permissions data"
      pattern: "fetch.*api/permissions"
    - from: "dashboard/src/App.tsx"
      to: "dashboard/src/pages/HooksPage.tsx"
      via: "React Router route at /hooks"
      pattern: "HooksPage"
    - from: "dashboard/src/App.tsx"
      to: "dashboard/src/pages/PermissionsPage.tsx"
      via: "React Router route at /permissions"
      pattern: "PermissionsPage"
---

<objective>
Complete the dashboard with Hooks and Permissions panels, responsive design polish, and visual verification.

Purpose: Finish all config viewer pages, ensure the dashboard is polished and responsive, and verify the complete experience with the user.
Output: Fully functional web dashboard covering all config areas with responsive design.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-web-dashboard/04-03-SUMMARY.md

@dashboard/src/App.tsx
@dashboard/src/lib/api.ts
@dashboard/src/components/Layout.tsx
@dashboard/src/components/Sidebar.tsx
@src/hooks/types.ts
@src/permissions/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Hooks and Permissions panels + responsive polish</name>
  <files>dashboard/src/pages/HooksPage.tsx, dashboard/src/pages/PermissionsPage.tsx, dashboard/src/App.tsx, dashboard/src/components/Layout.tsx, dashboard/src/components/Sidebar.tsx, dashboard/src/index.css</files>
  <action>
    1. Create `dashboard/src/pages/HooksPage.tsx`:
       - Fetch hooks data from `/api/hooks` and commands from `/api/commands` on mount
       - **Event Catalog section:**
         - List all 6 known hook events (PreToolUse, PostToolUse, Notification, Stop, SubagentStop, SessionStart)
         - For each event: show configured (green dot) or unconfigured (gray dot) status
         - Click configured event to expand and show:
           - Each matcher: pattern, command to run
           - Scope badge showing which settings file defines it
       - **Commands section** (below hooks):
         - List custom slash commands with name, scope, location
         - List skills with name, scope, location
         - Use separate subsections with headers

    2. Create `dashboard/src/pages/PermissionsPage.tsx`:
       - Fetch permissions data from `/api/permissions` on mount
       - Display as table: Tool, Pattern, Rule, Scope
       - Rule display: colored badge (allow=green, deny=red, ask=yellow/amber)
       - Click row to expand and show override chain (same pattern as settings page):
         - All scopes defining this tool+pattern
         - Winner highlighted, losers dimmed
         - Show why winner won (deny beats all, then higher scope wins)
       - Summary footer: "N allow, N deny, N ask" counts
       - Handle: no permissions configured, loading state

    3. Update `dashboard/src/App.tsx`:
       - Replace Hooks and Permissions placeholder routes with actual page components

    4. Add responsive design to Layout and Sidebar:
       - Sidebar: on screens < 768px, collapse to a hamburger menu icon
       - When collapsed: sidebar slides in as overlay on click, push content down or overlay
       - Add a simple hamburger toggle button in the header area
       - Content area: full width on mobile
       - Overview cards: 1 column on mobile, 2 on tablet, 3 on desktop
       - Tables: horizontal scroll on small screens (overflow-x-auto wrapper)
       - Use Tailwind responsive prefixes (sm:, md:, lg:)

    5. General polish across all pages:
       - Consistent page headers: page title + description text
       - Loading states: use a simple "Loading..." with a subtle animation (animate-pulse on a gray bar)
       - Error states: red banner with error message and retry button
       - Empty states: helpful message ("No settings configured", etc.)
       - Smooth expand/collapse transitions (CSS transition on max-height or Tailwind group/peer)

    Design notes:
    - Hooks event catalog: list style with status dots, expandable sections
    - Permissions: similar table style to settings page for consistency
    - Rule badges: small pills (allow=emerald, deny=red, ask=amber)
    - Responsive: sidebar collapses to hamburger below md breakpoint
    - Page transitions: no complex animations, just clean rendering
  </action>
  <verify>
    `npm run build` succeeds.
    Dashboard at /hooks shows event catalog with configured/unconfigured indicators.
    Dashboard at /permissions shows permissions table with rule badges.
    Sidebar collapses to hamburger on narrow viewport.
    All pages handle loading, error, and empty states.
  </verify>
  <done>
    Hooks page shows event catalog and commands list.
    Permissions page shows merged rules with override chain.
    Dashboard is responsive on mobile/tablet viewports.
    All pages have consistent loading/error/empty states.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete web dashboard with all config viewer panels (Settings, Memory, MCP, Hooks, Permissions), responsive sidebar navigation, and overview page</what-built>
  <how-to-verify>
    1. Build: `npm run build`
    2. Start: `node dist/index.js dashboard --no-open` (or `claude-ctl dashboard --no-open` if linked)
    3. Open: http://localhost:3737
    4. **Overview page**: Verify summary cards show correct counts for your config
    5. **Settings page**: Click a setting row — override chain expands. Use filter input.
    6. **Memory page**: Click a CLAUDE.md file — content preview appears
    7. **MCP page**: Click a server — details expand with masked secrets
    8. **Hooks page**: See event catalog with configured/unconfigured indicators
    9. **Permissions page**: See permission rules with colored rule badges
    10. **Responsive**: Resize browser to < 768px — sidebar collapses to hamburger
    11. **Navigation**: Click through all sidebar links — each loads correctly
    12. Verify: No console errors in browser DevTools
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] All 6 dashboard pages load and display data (overview, settings, memory, mcp, hooks, permissions)
- [ ] Expandable details work on settings, MCP, and permissions pages
- [ ] CLAUDE.md content viewer works
- [ ] Hooks event catalog shows configured/unconfigured status
- [ ] Permissions show colored rule badges
- [ ] Responsive sidebar works on narrow viewports
- [ ] No console errors in browser
- [ ] User approved visual verification checkpoint
</verification>

<success_criteria>
- All tasks completed
- All config areas browsable via web dashboard
- Drill-down into specific configurations works (expandable details)
- Dashboard is responsive
- User approved the visual experience
</success_criteria>

<output>
After completion, create `.planning/phases/04-web-dashboard/04-04-SUMMARY.md`
</output>
