---
phase: 05-advanced-features
plan: 04
type: execute
wave: 2
depends_on: ["05-01", "05-02", "05-03"]
files_modified:
  - dashboard/src/pages/HealthPage.tsx
  - dashboard/src/pages/MemoryPage.tsx
  - dashboard/src/pages/ProjectsPage.tsx
  - dashboard/src/pages/OverviewPage.tsx
  - dashboard/src/lib/api.ts
  - dashboard/src/App.tsx
  - dashboard/src/components/Sidebar.tsx
autonomous: false

must_haves:
  truths:
    - "Dashboard shows health score with visual gauge and category breakdown"
    - "Dashboard Memory page shows @import chain with broken import indicators"
    - "Dashboard has project discovery page showing all projects in a parent directory"
    - "Dashboard overview page shows health score card"
    - "All new pages load without errors"
  artifacts:
    - path: "dashboard/src/pages/HealthPage.tsx"
      provides: "Health score display with categories, score gauge, and recommendations"
      min_lines: 60
    - path: "dashboard/src/pages/ProjectsPage.tsx"
      provides: "Project discovery and comparison views"
      min_lines: 60
  key_links:
    - from: "dashboard/src/pages/HealthPage.tsx"
      to: "/api/health"
      via: "fetch health data"
      pattern: "fetch.*api/health"
    - from: "dashboard/src/pages/ProjectsPage.tsx"
      to: "/api/projects"
      via: "fetch discovered projects"
      pattern: "fetch.*api/projects"
    - from: "dashboard/src/App.tsx"
      to: "dashboard/src/pages/HealthPage.tsx"
      via: "React Router route at /health"
      pattern: "HealthPage"
    - from: "dashboard/src/App.tsx"
      to: "dashboard/src/pages/ProjectsPage.tsx"
      via: "React Router route at /projects"
      pattern: "ProjectsPage"
---

<objective>
Add dashboard pages for all Phase 5 features: health score visualization, @import chain display on Memory page, and multi-project discovery/comparison page.

Purpose: Make the advanced features accessible through the web dashboard with visual presentations that are more informative than CLI output.
Output: New dashboard pages for health and projects, enhanced memory page with import info.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-advanced-features/05-01-SUMMARY.md
@.planning/phases/05-advanced-features/05-02-SUMMARY.md
@.planning/phases/05-advanced-features/05-03-SUMMARY.md

@dashboard/src/App.tsx
@dashboard/src/lib/api.ts
@dashboard/src/components/Sidebar.tsx
@dashboard/src/pages/OverviewPage.tsx
@dashboard/src/pages/MemoryPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Health page, import display, and projects page</name>
  <files>dashboard/src/pages/HealthPage.tsx, dashboard/src/pages/MemoryPage.tsx, dashboard/src/pages/ProjectsPage.tsx, dashboard/src/pages/OverviewPage.tsx, dashboard/src/lib/api.ts, dashboard/src/App.tsx, dashboard/src/components/Sidebar.tsx</files>
  <action>
    1. Update `dashboard/src/lib/api.ts`:
       - Add types for HealthResult, MemoryImportResult, WorkspaceScan, ComparisonResult
       - Add fetch functions: fetchHealth, fetchMemoryImports, fetchProjects, fetchCompare

    2. Create `dashboard/src/pages/HealthPage.tsx`:
       - Fetch health data from `/api/health` on mount
       - **Score display**: Large circular or semi-circular gauge showing score 0-100 with grade letter
         - Color: green (A/B), yellow (C), red (D/F)
       - **Category breakdown**: Cards for each category (Memory, Settings, MCP, Hooks, Permissions)
         - Each card: category name, score bar, check list with pass/fail indicators
         - Green checkmark for passed, red X for failed checks
       - **Recommendations section**: Ordered list of actionable items for failed checks
       - Loading skeleton, error state

    3. Update `dashboard/src/pages/MemoryPage.tsx`:
       - Add second data fetch for `/api/memory/imports` alongside existing memory data
       - For each CLAUDE.md file card, add an "Imports" subsection if imports exist:
         - List each @import with resolved path
         - Green dot for existing imports, red dot for broken
         - Show chain depth indicator (e.g., "imports 3 files, 1 broken")
       - If no imports, don't show the section (clean display)

    4. Create `dashboard/src/pages/ProjectsPage.tsx`:
       - Two modes: Discovery and Comparison
       - **Discovery mode** (default):
         - Input field for parent directory path (prefilled with projectDir parent)
         - "Discover" button
         - Results: grid of project cards showing:
           - Project name
           - Indicators: CLAUDE.md (green/gray), .claude/ (green/gray), .mcp.json (green/gray)
           - Click to select for comparison
         - "Compare Selected" button (enabled when 2+ selected)
       - **Comparison mode** (after clicking Compare):
         - Side-by-side table: columns = projects, rows = config items
         - Group by type (Settings, MCP, Hooks, Permissions, Memory)
         - Highlight cells where projects differ
         - Back button to return to discovery
       - Loading states for both discovery and comparison (comparison is slower)

    5. Update `dashboard/src/pages/OverviewPage.tsx`:
       - Add a health score card to the overview grid
       - Shows score, grade, and summary text
       - Links to /health page for details

    6. Update `dashboard/src/App.tsx`:
       - Add routes: `/health`, `/projects`

    7. Update `dashboard/src/components/Sidebar.tsx`:
       - Add "Health" nav item with heart/pulse icon between Permissions and a separator
       - Add "Projects" nav item with folder icon after Health
       - Use Heroicon SVG paths consistent with existing icons

    Design notes:
    - Follow existing page patterns (useState + useEffect, loading/error/data states)
    - Health gauge can be a simple CSS arc or just a large number with color — no charting library needed
    - Score bars: use Tailwind width percentages with colored backgrounds
    - Projects page input: user types path, clicks discover. No auto-discovery (could be slow on large dirs)
    - Comparison table: horizontal scroll for many projects, sticky first column for labels
    - Keep consistent with existing dark sidebar + light content theme
  </action>
  <verify>
    `npm run build` succeeds.
    All new pages load without errors.
    Health page shows score with categories.
    Memory page shows import info when available.
    Projects page allows discovery and comparison.
  </verify>
  <done>
    Health page shows visual score with breakdown.
    Memory page shows @import chains.
    Projects page supports discovery and comparison.
    Overview includes health score card.
    All new routes and sidebar links work.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Phase 5 dashboard: health score visualization, @import chain display, multi-project discovery and comparison</what-built>
  <how-to-verify>
    1. Build: `npm run build`
    2. Start: `node dist/index.js dashboard --no-open`
    3. Open: http://localhost:3737
    4. **Overview**: Verify health score card appears with score and grade
    5. **Health page**: Click Health in sidebar — see score gauge, category breakdown, recommendations
    6. **Memory page**: If CLAUDE.md files with @imports exist, verify import chain display
    7. **Projects page**: Enter a parent directory path (e.g., parent of current project), click Discover
    8. Verify project cards appear with config indicators
    9. Select 2+ projects and click Compare — verify comparison table
    10. **Navigation**: All sidebar links work, no console errors
    11. **Responsive**: New pages work at narrow viewport
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] Health page shows score with visual gauge and categories
- [ ] Memory page shows @import info when imports exist
- [ ] Projects page discovers and compares projects
- [ ] Overview page includes health card
- [ ] All sidebar links work
- [ ] No console errors in browser
- [ ] User approved visual verification
</verification>

<success_criteria>
- All tasks completed
- All Phase 5 features accessible via web dashboard
- Visual presentations are clear and informative
- User approved the experience
</success_criteria>

<output>
After completion, create `.planning/phases/05-advanced-features/05-04-SUMMARY.md`
</output>
